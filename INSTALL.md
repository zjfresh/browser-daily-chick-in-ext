# 📘 Daily Reminder Extension - 安装和使用指南

## 🚀 安装步骤

### 1. 开发者模式安装

1. 打开 Chrome 浏览器
2. 地址栏输入 `chrome://extensions/`
3. 开启右上角的 **"开发者模式"**
4. 点击 **"加载已解压的扩展程序"**
5. 选择此项目文件夹 `browser-daily-chick-in-ext`
6. 扩展安装成功！🎉

### 2. 验证安装

- 浏览器工具栏会出现 📘 图标
- 点击图标打开弹出窗口
- 右键图标 → "选项" 打开配置页面

## ⚙️ 配置使用

### 第一次使用

1. 点击浏览器工具栏的扩展图标
2. 点击 **"⚙️ 管理配置"** 打开选项页面
3. 在 "添加新的提醒配置" 表单中：
   - **网站URL**: 输入要提醒的网站地址
   - **备注说明**: 可选，为自己添加说明
   - **提醒模式**: 
     - `显示提醒 (Toast)`: 在页面上显示提醒框
     - `自动打开页面`: 直接打开新标签页
   - **触发规则**:
     - `每天`: 每日触发
     - `仅工作日`: 周一到周五触发
     - `自定义间隔天数`: 每N天触发一次
       - 可设置**首次触发日期**，从指定日期开始计算间隔
       - 留空则立即开始计算间隔

### 配置示例

```json
[
  {
    "url": "https://github.com",
    "note": "检查GitHub通知",
    "mode": "toast",
    "rule": { "type": "daily" }
  },
  {
    "url": "https://example.com/dashboard",
    "note": "工作仪表板检查", 
    "mode": "auto",
    "rule": { "type": "weekday" }
  },
  {
    "url": "https://blog.example.com",
    "note": "博客更新检查",
    "mode": "toast", 
    "rule": { "type": "interval", "days": 3 }
  },
  {
    "url": "https://stackoverflow.com",
    "note": "技术学习 - 每周一次，从明天开始",
    "mode": "toast",
    "rule": { 
      "type": "interval", 
      "days": 7,
      "firstTriggerDate": "2025-08-08"
    }
  }
]
```

## 🔄 工作原理

### 触发机制
- 当您打开新标签页或浏览网页时，扩展会检查是否有配置需要触发
- 每个配置记录最后打开日期，避免同一天重复触发
- 后台每小时检查一次，确保日期状态正确
- **🌅 跨天检测**: 页面保持打开过夜时，新的一天开始会自动触发配置检查
- **📱 焦点检测**: 页面重新获得焦点或变为可见时，会检查日期变化

### 提醒方式
1. **Toast 提醒**: 使用浏览器原生确认对话框：
   - 显示网站信息和备注
   - 点击 "确定" 会跳转到目标网站
   - 点击 "取消" 忽略本次提醒
   - **无论选择什么，都会标记为今日已触发**，避免重复提醒

2. **自动打开**: 直接在新标签页打开目标网站

## 🛠️ 功能特性

### 弹出窗口功能
- 查看总配置数、今日触发数、待触发数
- **立即检查**: 手动触发检查当前是否有待处理的提醒
- **重置今日**: 清除今日已触发记录，重新触发提醒
- **管理配置**: 跳转到选项页面

### 选项页面功能
- 添加/编辑/删除配置
- 测试配置
- 导出/导入配置（JSON格式）
- 批量重置所有日期
- 查看每个配置的最后触发日期

### 🌅 跨天触发功能
- **自动检测**: 后台脚本每小时检查日期变化
- **实时通知**: 检测到新的一天时，通知所有活动标签页
- **用户活动**: 页面焦点变化、可见性变化都会触发检查
- **日志记录**: 在开发者工具中可以查看详细的触发日志

## 📋 使用技巧

### 最佳实践
1. **合理设置触发频率**: 
   - 日常检查类使用 "每天"
   - 工作相关使用 "仅工作日"
   - 周期性检查使用 "自定义间隔"

2. **选择合适的提醒模式**:
   - 需要选择性访问的用 "显示提醒"
   - 必须访问的用 "自动打开"

3. **添加有意义的备注**: 方便记忆配置用途

4. **🌅 利用跨天功能**:
   - 保持工作相关页面打开，过夜后自动检查配置
   - 无需重新打开页面就能获得新的提醒

### 故障排除
- **提醒没有显示**: 检查网站权限，确保不在 `chrome://` 页面
- **自动打开失败**: 可能被浏览器阻止弹窗，请允许此站点弹窗
- **配置丢失**: 使用导出功能定期备份配置
- **跨天不触发**: 
  - 检查后台脚本是否正常运行（chrome://extensions/ → Service Worker）
  - 确认浏览器有权限设置定时器
  - 查看控制台日志确认日期检查是否正常

## 🔒 隐私说明

- 所有数据存储在本地浏览器中
- 不会上传任何个人信息到外部服务器
- 只在您配置的网站上显示提醒
- 不会跟踪您的浏览行为

## 🆘 常见问题

**Q: 为什么在某些网站上看不到提醒？**
A: 某些网站（如 chrome:// 页面、扩展页面）有安全限制，无法注入内容脚本。

**Q: 可以设置具体的提醒时间吗？**
A: 当前版本基于浏览活动触发，不支持定时提醒。

**Q: 如何备份我的配置？**
A: 在选项页面点击"导出配置"按钮，下载 JSON 文件保存。

**Q: 配置可以在不同设备间同步吗？**
A: 当前版本不支持同步，需要手动导出/导入配置文件。

**Q: 跨天功能是如何工作的？**
A: 后台脚本每小时检查一次日期，当检测到新的一天时，会通知所有活动的标签页重新检查配置。同时，页面焦点变化也会触发检查。

**Q: 为什么点击"取消"也会标记为已触发？**
A: 这是为了避免重复骚扰用户。如果用户明确表示当前不想打开某个网站，我们就不会在当天继续提醒，尊重用户的选择。 